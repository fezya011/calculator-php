{% extends "layout.twig" %}

{% block styles %}
    <link href="/assets/front/css/article.css" rel="stylesheet">
{% endblock %}

{% block page_header_and_breadcrumbs %}
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ layout -->
{% endblock %}

{% block content %}
    <div class="article-page">
        <div class="container">
            <a href="{% if article.meta.category %}/articles?category={{ article.meta.category|url_encode }}{% else %}/articles{% endif %}" class="back-link">
                <i class="fi-rr-arrow-left"></i>
                –ù–∞–∑–∞–¥ –∫ —Å—Ç–∞—Ç—å—è–º
            </a>

            {% if article and article.title %}
                <article class="article-content">
                    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å—Ç–∞—Ç—å–∏ -->
                    {% if article.meta.category %}
                        <div class="article-category" style="background: {{ (article.category_info.color ?? '#667eea')|e }};">
                            {{ (article.category_info.icon ?? 'üìÅ')|e }} {{ article.meta.category|e }}
                        </div>
                    {% endif %}

                    <header class="article-header">
                        <h1 class="article-title">{{ article.title|e }}</h1>

                        <div class="article-meta">
                            <span class="meta-item">
                                <i class="fi-rr-user"></i>
                                {{ (article.meta.author ?? '–ê–≤—Ç–æ—Ä')|e }}
                            </span>
                            <span class="meta-item">
                                <i class="fi-rr-calendar"></i>
                                {{ article.meta.date ? article.meta.date|date('d.m.Y –≤ H:i') : '–î–∞—Ç–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞' }}
                            </span>
                            {% if article.meta.category %}
                                <span class="meta-item">
                                    <i class="fi-rr-folder"></i>
                                    <a href="/articles?category={{ article.meta.category|url_encode }}" class="category-link">
                                        {{ article.meta.category|e }}
                                    </a>
                                </span>
                            {% endif %}
                            <span class="meta-item" id="reading-time">
                                <i class="fi-rr-time"></i>
                                –í—Ä–µ–º—è —á—Ç–µ–Ω–∏—è: ~{{ ((article.content|striptags|split(' ')|length) / 200)|round(0, 'ceil') }} –º–∏–Ω
                            </span>
                        </div>
                    </header>

                    <div class="article-body">
                        {{ article.content ?? '–ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç–∞—Ç—å–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç'|raw }}
                    </div>
                </article>
            {% else %}
                <div class="not-found">
                    <div class="not-found-icon">üòî</div>
                    <h3>–°—Ç–∞—Ç—å—è –Ω–µ –Ω–∞–π–¥–µ–Ω–∞</h3>
                    <p>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç—å—è –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞.</p>
                    <a href="/articles" class="not-found-link">
                        <i class="fi-rr-books"></i>
                        –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å—Ç–∞—Ç—å—è–º
                    </a>
                </div>
            {% endif %}
        </div>
    </div>
{% endblock %}

{% block java_script %}
    <script src="/assets/front/js/readTime.js"></script>
{% endblock %}