{% extends "layout.twig" %}

{% block styles %}
    <link href="/assets/css/home.css" rel="stylesheet">
{% endblock %}



{% block content %}
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
    {% if content %}
        <div class="page-content mb-40">
            {{ content|raw }}
        </div>
    {% endif %}

    <!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ -->
    <div class="section-articles mb-50">
        <h2 class="section-title">
            <i class="fi-rr-flame me-2"></i>–ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å—Ç–∞—Ç—å–∏
        </h2>

        {% if articles %}
            <div class="articles-grid">
                {% for article in articles %}
                    <article class="article-card">
                        <div class="article-header">
                            <div class="article-title">
                                <h3 class="h4 mb-0">
                                    <a href="/article/{{ article.slug|e }}">
                                        {{ article.title|e }}
                                    </a>
                                </h3>
                            </div>
                            {% if article.meta.category %}
                                <div class="article-category" style="background: {{ (article.category_info.color ?? '#667eea')|e }}; color: white;">
                                    {{ (article.category_info.icon ?? 'üìÅ')|e }} {{ article.meta.category|e }}
                                </div>
                            {% endif %}
                        </div>

                        <div class="article-meta">
                            <span class="meta-item">
                                <i class="fi-rr-user me-1"></i>{{ (article.meta.author ?? '–ê–≤—Ç–æ—Ä')|e }}
                            </span>
                            <span class="meta-item">
                                <i class="fi-rr-calendar me-1"></i>{{ article.meta.date ? article.meta.date|date('d.m.Y') : '–ù–µ —É–∫–∞–∑–∞–Ω–∞' }}
                            </span>
                            <span class="meta-item reading-time">
                                <i class="fi-rr-time me-1"></i>~5 –º–∏–Ω
                            </span>
                        </div>

                        <p class="article-excerpt">
                            {{ (article.excerpt ?? '–û–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç')|e }}
                        </p>

                        <a href="/article/{{ article.slug|e }}" class="btn btn-primary btn-sm">
                            –ß–∏—Ç–∞—Ç—å –¥–∞–ª–µ–µ
                        </a>
                    </article>
                {% endfor %}
            </div>

            <div class="text-center mt-30">
                <a href="/articles" class="btn btn-primary">
                    <i class="fi-rr-books me-2"></i>–í—Å–µ —Å—Ç–∞—Ç—å–∏
                </a>
            </div>
        {% else %}
            <div class="empty-state">
                <div class="empty-icon">üì≠</div>
                <h3 class="h4 mb-10">–°—Ç–∞—Ç—å–∏ –ø–æ–∫–∞ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã</h3>
                <p class="mb-20">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –µ—â–µ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–ª –Ω–∏ –æ–¥–Ω–æ–π —Å—Ç–∞—Ç—å–∏.</p>
                <a href="/articles" class="btn btn-outline-primary">–û–±–Ω–æ–≤–∏—Ç—å</a>
            </div>
        {% endif %}
    </div>

    <!-- –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ -->
    <div class="section-features">
        <h2 class="section-title">
            <i class="fi-rr-star me-2"></i>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
        </h2>

        <div class="features-grid">
            <div class="feature-card">
                <div class="feature-icon">üìù</div>
                <h3 class="feature-title">–ü—Ä–æ—Å—Ç–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                <p class="feature-description">
                    –°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å—Ç–∞—Ç—å–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ Markdown —Å —É–¥–æ–±–Ω—ã–º —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
                </p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">üìÇ</div>
                <h3 class="feature-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏</h3>
                <p class="feature-description">
                    –û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Å—Ç–∞—Ç—å–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                </p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">‚ö°</div>
                <h3 class="feature-title">–ë—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞</h3>
                <p class="feature-description">
                    –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
                </p>
            </div>
        </div>
    </div>
{% endblock %}

{% block java_script %}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.article-card').forEach(card => {
                const excerpt = card.querySelector('.article-excerpt');
                if (excerpt) {
                    const text = excerpt.textContent || excerpt.innerText;
                    const wordCount = text.trim().split(/\s+/).length;
                    const readingTime = Math.max(1, Math.ceil(wordCount / 200));

                    const timeElement = card.querySelector('.reading-time');
                    if (timeElement) {
                        timeElement.innerHTML = `<i class="fi-rr-time me-1"></i>~${readingTime} –º–∏–Ω`;
                    }
                }
            });
        });
    </script>
{% endblock %}